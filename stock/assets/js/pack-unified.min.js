!function(){"use strict";window.PackAutoSaveLoaded||(window.PackAutoSaveLoaded=!0);const e="2.0.0-shim";class o{constructor(e={}){this._shim=!0,this.config={...e},this.debug("Shim constructed",this.config)}debug(...e){this.config.debug&&console.log("🔧 PackSystem(Shim):",...e)}getVersion(){return e}isReady(){return!!window.packSystem&&window.packSystem!==this&&"function"==typeof window.packSystem.isReady?window.packSystem.isReady():!1}showLockDiagnostic(){console.log("🔒 Shim diagnostic (modular system not yet active)")}}function n(){const e=window.DISPATCH_BOOT||{};return{transferId:e.transfer_id,userId:e.user_id,debug:!!e.debug}}function t(e){window.ModularTransfersPackSystem?(window.packSystem=new window.ModularTransfersPackSystem(e),console.log("✅ Pack system (modular) initialized via shim")):(window.packSystem=new o(e),console.log("✅ Pack system (shim placeholder) initialized – awaiting modular upgrade"),function(e){let o=0;const n=setInterval((()=>{if(o+=100,window.ModularTransfersPackSystem){try{const o=window.packSystem;window.packSystem=new window.ModularTransfersPackSystem(e),console.log("🔁 Upgraded shim to modular implementation"),o&&o._shim}else console.warn("Modular upgrade failed",e)}catch(e){console.warn("Modular upgrade failed",e)}finally{clearInterval(n)}}else o>=3e3&&clearInterval(n)}),100)}(e))}function i(){if(!window.DISPATCH_BOOT){let e=0;const o=setInterval((()=>{e++,window.DISPATCH_BOOT?(clearInterval(o),t(n())):e>=40&&(clearInterval(o),console.warn("PackSystem shim: DISPATCH_BOOT not found after 2s"))}),50);return}t(n())}window.TransfersPackSystem=o,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i(),window.__packLockDiagBridgeInstalled||(window.showLockDiagnostic=function(){if(window.packSystem?.showLockDiagnostic)return window.packSystem.showLockDiagnostic();{const e=window.showLockDiagnostic;try{return e&&e()}catch(e){console.warn("Legacy diagnostic error",e)}console.warn("No lock diagnostic available (shim)")}},window.__packLockDiagBridgeInstalled=!0),window.DISPATCH_BOOT?.debug&&console.log(`📦 Transfer Pack System ${e} active`)}();