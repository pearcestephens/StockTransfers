/* ==========================================================================
   Transfers — Common UI (shared across Pack/Receive)
   ========================================================================== */

:root {
  /* tfx */
  --tfx-muted:#6c757d;
  --tfx-success:#28a745;
  --tfx-warning:#fd7e14;
  --tfx-danger:#dc3545;
  --tfx-info:#17a2b8;
  --tfx-light:#f8f9fa;
  --tfx-border:#dee2e6;

  /* pack-bottom theme */
  --pb-bg:#0f172a;
  --pb-panel:#0b1224;
  --pb-fg:#e5e7eb;
  --pb-sub:#9aa4b2;
  --pb-border:#1f2937;
  --pb-chip:#111827;
  --pb-green:#22c55e;
  --pb-amber:#f59e0b;
  --pb-red:#ef4444;
  --pb-primary:#2563eb;
  --pb-outline:#475569;
}

#print-header{display: none;
}
#print-footer{display: none;
}

/* Generic card/table spacing fixes */
.tfx-card-tight .card-body { padding:.75rem 1rem; }

/* Address summary blocks (used by courier panels) */
.address-summary {
  background:#f8f9fa;
  border-left:4px solid var(--tfx-info);
  border-radius:.25rem;
}

/* Pack bottom panel */
.pack-bottom{ margin:16px 0 24px; }
.pb-grid{ display:grid; gap:16px; grid-template-columns:1fr 1fr; }
.pb-card{
  background:linear-gradient(180deg,var(--pb-panel),#0e162d 60%);
  color:var(--pb-fg);
  border:1px solid var(--pb-border);
  border-radius:12px; overflow:hidden;
  box-shadow:0 8px 26px rgba(0,0,0,.35);
}
.pb-card__head{ display:flex; justify-content:space-between; align-items:center; gap:10px; padding:14px 16px; border-bottom:1px solid var(--pb-border); }
.pb-title{ font-weight:800; letter-spacing:.2px; }
.pb-sub{ color:var(--pb-sub); font-size:.92rem; }
.pb-card__body{ padding:14px 16px; }
.pb-card__foot{ padding:14px 16px; border-top:1px solid var(--pb-border); display:flex; justify-content:flex-end; }

/* inputs & buttons */
.pb-fieldrow{ display:flex; align-items:center; gap:12px; margin-bottom:12px; }
.pb-label{ min-width:160px; color:var(--pb-sub); }
.pb-inputgroup{ display:inline-flex; border:1px solid var(--pb-border); border-radius:10px; overflow:hidden; }
.pb-input{ width:90px; text-align:center; background:#0b1327; color:var(--pb-fg); border:none; outline:none; padding:8px 6px; }
.pb-step{ width:34px; background:#0b1327; color:#cbd5e1; border:none; outline:none; cursor:pointer; }
.pb-step:hover{ background:#0f1935; }
.pb-actions{ display:flex; gap:8px; }
.btn{ border:1px solid transparent; padding:9px 14px; border-radius:10px; cursor:pointer; font-weight:700; }
.btn-primary{ background:var(--pb-primary); color:#fff; }
.btn-outline{ background:transparent; border-color:var(--pb-outline); color:#d1d5db; }
.btn-success{ background:var(--pb-green); color:#000; }

.pb-hint{ color:var(--pb-sub); font-size:.85rem; margin-top:10px; }

/* ready panel */
.pb-ready .pb-card__head{ display:flex; gap:14px; }
.pb-status{ align-items:center; } /* display is inherited where used */
.pb-traffic{ display:flex; gap:8px; align-items:center; }
.pb-traffic .dot{ width:12px; height:12px; border-radius:50%; opacity:.28; }
.dot--red{ background:var(--pb-red); }
.dot--amber{ background:var(--pb-amber); }
.dot--green{ background:var(--pb-green); }
.pb-traffic.is-red .dot--red,
.pb-traffic.is-amber .dot--amber,
.pb-traffic.is-green .dot--green{ opacity:1; box-shadow:0 0 0 2px rgba(255,255,255,.1); }

.pb-stats{ display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:10px; }
.stat{ background:rgba(255,255,255,.03); border:1px solid var(--pb-border); border-radius:10px; padding:10px 12px; }
.stat__label{ color:var(--pb-sub); font-size:.8rem; }
.stat__value{ font-weight:800; font-size:1.1rem; }
.stat--wide{ grid-column:1 / -1; display:flex; align-items:center; justify-content:space-between; }
.pb-price{ margin-left:8px; font-weight:900; }
.pb-src{ margin-left:10px; font-size:.8rem; color:var(--pb-sub); }

@media (max-width:992px){ .pb-grid{ grid-template-columns:1fr; } }

/* Courier panels (NZ Post, GSS, Manual) */
.courier-panel{ border:1px solid var(--tfx-border); border-radius:.25rem; background:#fff; }

/* Shipping tabs */
.shipping-tabs .nav-link{ font-weight:600; border:0; border-bottom:2px solid transparent; padding:.6rem .75rem; }
.shipping-tabs .nav-link.active{ border-bottom-color:var(--tfx-info); }

/* Inline badges/messages shown when counted=0, etc. */
.badge-to-remove{
  display:inline-block;
  margin-left:.5rem; padding:.15rem .35rem;
  font-size:.7rem; border-radius:.25rem;
  color:#212529; background:#e9ecef;
}

/* Tiny helper for fixed-width number inputs */
.tfx-num{ width:6.5em; }

/* Simple toast container if Bootstrap Toasts aren’t used */
#toast-container .toast{ border-radius:.25rem; box-shadow:0 4px 14px rgba(0,0,0,.12); }

/* Table utilities */
.table .counted-td input[type="number"]{ width:6em; min-width:5em; }



/* Native printer integration — neat, neutral, CoreUI-friendly */
.sl-panel{ border:1px solid #e5e7eb; border-radius:12px; overflow:hidden; }
.sl-head{ display:flex; justify-content:space-between; align-items:center; padding:12px 16px; background:#f7f8fa; border-bottom:1px solid #e5e7eb; }
.sl-head__title{ display:flex; gap:12px; align-items:center; }
.sl-head__logo{ width:28px; height:28px; border-radius:6px; background:#dbe2ef; box-shadow:inset 0 0 0 1px rgba(0,0,0,.05); }
.sl-title{ font-weight:800; color:#1f2937; }
.sl-sub{ color:#6b7280; font-size:.92rem; }
.sl-head__controls{ display:flex; gap:8px; align-items:center; }
.sl-body{ padding:14px 16px; }

.sl-row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
.sl-row--options{ margin-bottom:10px; }
.sl-row--weights{ margin:10px 0; }
.sl-check{ display:inline-flex; gap:6px; align-items:center; color:#1f2937; }

.sl-address{ display:grid; grid-template-columns:repeat(4,minmax(0,1fr)); gap:8px; margin:10px 0; }
@media (max-width:992px){ .sl-address{ grid-template-columns:repeat(2,minmax(0,1fr)); } }
.d-none{ display:none !important; }

.sl-chip{ background:#eef2f7; color:#58657a; border-radius:999px; padding:6px 10px; font-weight:700; font-size:12px; }
.sl-chip--info{ background:#e7f2ff; color:#194b88; }
.sl-chip--primary{ background:#e9edff; color:#2a3fb9; }
.sl-spacer{ flex:1 1 auto; }

.sl-table thead th{ background:#f7f8fa; border-color:#e5e7eb; }
.sl-table td, .sl-table th{ border-color:#e5e7eb; }
.btn-icon-xs{ --sz:22px; width:var(--sz); height:var(--sz); padding:0; display:inline-flex; align-items:center; justify-content:center; border-radius:6px; border:1px solid #f1d4d4; background:#fdecec; color:#a61b1b; }
.btn-icon-xs:hover{ background:#fbd3d3; }

.sl-feedback{ color:#6b7280; min-height:22px; }
.sl-rates{ margin-top:8px; display:grid; gap:8px; grid-template-columns:repeat(2,minmax(0,1fr)); }
.sl-rate{ display:flex; align-items:center; justify-content:space-between; border:1px solid #e5e7eb; border-radius:10px; padding:8px 10px; background:#fff; cursor:pointer; }
.sl-rate:hover{ background:#f9fafb; }
.sl-rate__name{ font-weight:700; color:#1f2937; }
.sl-rate__meta{ color:#6b7280; font-size:.9rem; display:flex; gap:10px; }

/* ---------- Print rules ---------- */

/* @page must be top-level (not inside @media) */
@page { size:A4; margin:14mm 10mm 16mm; }

@media print {

  /* Hide interactive inputs; show static mirrors */
  .counted-td input[type="number"]{ display:none !important; }
  .counted-td .counted-print-value{ display:inline !important; }

  /* Lighter borders for tables */
  table.table, table.table *{ border-color:#999 !important; }

  /* Page + base */
  html, body{
    background:#fff !important;
    color:#000 !important;
    -webkit-print-color-adjust:exact;
    print-color-adjust:exact;
  }

  /* Hide chrome / interactive UI */
  .app-header, .sidebar, .breadcrumb, #product-search-wrapper,
  .tfx-action-buttons, .sw__controls, .sw__prefs, .sw__actions, .sw__buttons, .sw__printer,
  .btn, [role="button"], .notification-bell, #notificationDropDown,
  footer.app-footer, .ps-img-overlay, .toast, .nav, .pace, .pace-activity, .pace-progress,
  .tfx-pack-toolbar .draft-status-pill, .tfx-pack-toolbar .tfx-pack-saved,
  .tfx-remove-btn, .tfx-btn, i.fa { display:none !important; }

  .container-fluid{ padding:0 !important; margin:0 !important; }
  .card, .card-body, .card-header{ border:0 !important; box-shadow:none !important; padding:0 !important; margin:0 0 6mm 0 !important; }

  /* Repeating header/footer (every page) */
  #print-header, #print-footer{ position:fixed; left:0; right:0; font-family:inherit; }
  #print-header{
    top:0; height:12mm; border-bottom:1px solid #000;
    display:flex; align-items:flex-end; justify-content:space-between; padding:0 0 2mm 0;
  }
  #print-header .ph-title{ font-size:12pt; font-weight:700; text-transform:uppercase; }
  #print-header .ph-meta{ font-size:9pt; text-align:right; }

  #print-footer{
    bottom:0; height:10mm; border-top:1px solid #000;
    display:flex; align-items:center; justify-content:space-between; font-size:9pt;
  }
  #print-footer .pf-left{ font-weight:600; }
  #print-footer .pf-right::after{ content:"Page " counter(page) " of " counter(pages); }

  main.main{ padding-top:14mm !important; padding-bottom:12mm !important; }

  /* Product table */
  table{ border-collapse:collapse !important; }
  thead{ display:table-header-group; }  /* repeat on each page */
  tfoot{ display:table-footer-group; }

  #transfer-table th, #transfer-table td{
    border:1px solid #333 !important; padding:3px 6px !important; font-size:10pt !important; vertical-align:middle !important;
  }
  #transfer-table th{ background:#f3f3f3 !important; }
  #transfer-table td:nth-child(1){ width:10mm; }
  #transfer-table td.counted-td input.tfx-num{ display:none !important; }
  #transfer-table td .counted-print-value{ display:inline !important; font-weight:700; }
  .tfx-product-sku a{ display:none !important; } /* hide external links */
  .tfx-product-sku{ color:#000 !important; }

  /* Shipping summary & packages (keep essentials only) */
  .sw{ margin-top:4mm !important; }
  .sw__status{ font-size:10pt !important; margin-bottom:2mm !important; }
  .sw__chips .sw__chip, .sw__chips button{ display:none !important; }
  #sw-packages th, #sw-packages td{ border:1px solid #333 !important; padding:3px 6px !important; font-size:10pt !important; }
  #sw-rates, #sw-override-block, .sw__courieronly{ display:none !important; }

  /* Notes & manual tracking areas stay visible and printable */
  #notesForTransfer, #tracking-items{ min-height:20mm; border:1px solid #000 !important; }
  #btn-add-tracking, #tracking-count{ display:none !important; }

  /* Sign-off block appended after content */
  main.main::after{
    content:
      "Packed by: __________________   Signature: __________________   Time: __________" "\A"
      "Checked by: ________________   Signature: __________________   Time: __________" "\A"
      "Notes: _________________________________________________________________________" "\A"
      "_______________________________________________________________________________";
    white-space:pre; display:block; margin-top:6mm; padding-top:3mm; border-top:1px solid #000; font-size:10pt;
    page-break-inside:avoid;
  }

  /* Faint watermark to reunite separated pages */
  body.printing::before{
    content:attr(data-doc-watermark);
    position:fixed; inset:25% 0 auto 0; text-align:center; font-size:48pt; color:rgba(0,0,0,0.06);
    transform:rotate(-25deg); pointer-events:none;
  }
}

